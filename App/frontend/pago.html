<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Pasarela de Pagos - Cuota</title>
  <script>
    const token = sessionStorage.getItem("token");
    if (!token) {
      window.location.href = "login.html";
    }
  </script>
  <link rel="stylesheet" href="../css/pago.css">
</head>
<body>
<button onclick="window.location.href='index.html'" class="btn-atras">← Atrás</button>
  <h2>💰 Pasarela de Pagos - Cuota #<span id="lblNumeroCuota"></span></h2>

  <div id="info-cuota">
    <p><strong>Monto Total:</strong> S/ <span id="lblMontoTotal">0.00</span></p>
    <p><strong>Restante:</strong> S/ <span id="lblRestante">0.00</span></p>
  </div>

  <form id="form-pago" enctype="multipart/form-data">
    <input type="hidden" id="cuotaId" value="">
    
    <label for="metodo">Método de pago:</label>
    <select id="metodo" required>
      <option value="">-- Seleccionar --</option>
      <option value="EFECTIVO">Efectivo</option>
      <option value="BILLETERA_DIGITAL">Billetera Digital</option>
      <option value="MERCADO_PAGO">Mercado Pago</option>
    </select>

    <label for="monto">Monto:</label>
    <input type="number" id="monto" step="0.01" required>

    <label for="comprobante">Comprobante (si aplica):</label>
    <input type="file" id="comprobante">

    <button type="submit">Registrar Pago</button>
    <button type="button" id="btnMercadoPago">💳 Link de Mercado Pago</button>
  </form>

  <h3>📄 Pagos Registrados</h3>
  <ul id="lista-pagos"></ul>

  <button id="btnFinalizar" disabled>✅ Finalizar y Generar Comprobante</button>

  <script src="../js/pago.js"></script>
</body>
</html>
